@{
    ViewBag.Title = "Contact";
}

<hgroup class="title">
    <h1>API Test</h1>
</hgroup>

<section class="actions">
    <label for="idInput">Id (for get, update, and delete)</label>
    <input type="number" id="idInput" />

    <label for="dataArea">Data (for create and update)</label>
    <textarea id="dataArea" rows="4" cols="100"></textarea>

    <div class="button-row">
        <button id="getAllButton">Get All</button>
        <button id="getButton">Get</button>
        <button id="createButton">Create</button>
        <button id="updateButton">Update</button>
        <button id="deleteButton">Delete</button>
    </div>
</section>

<section class="response">
    <div id="response" style="display:none;">
        <h3>Response</h3>
        <div id="responseText"></div>
    </div>
    <div id="failure" style="display:none;">
        <h3>Error</h3>
        <div id="failureText"></div>
    </div>
</section>

@section Scripts {
    <script>

        $(document).on('ready', function () {
            $("#getAllButton").on('click', function () {
                $.get('/api/sprintapi/').done(function (response) {
                    $("#responseText").text(JSON.stringify(response, undefined, 3));
                    $("#response").show();
                });
                return false;
            });

            $("#getButton").on('click', function () {
                var id = $("#idInput").val();
                $.get('/api/sprintapi/' + id + "/").done(function (response) {
                    $("#responseText").text(JSON.stringify(response, undefined, 3));
                    $("#response").show();
                });
                return false;
            });

            $("#createButton").on('click', function () {
                var postData = JSON.parse($("#dataArea").val());

                //create a sprint
                $.post('/api/sprintapi/', postData)
                    .done(function (response) {
                        $("#responseText").text(JSON.stringify(response, undefined, 3));
                        $("#response").show();
                    }).fail(function (jqXHR, status, message) {
                        $("#failureText").text(message);
                        $("#failure").show();
                    });
                return false;
            });

            $("#updateButton").on('click', function () {
                $.get('/api/sprintapi/').done(function (response) {
                    $("#responseText").text(JSON.stringify(response, undefined, 3));
                    $("#response").show();
                });
                return false;
            });

            $("#deleteButton").on('click', function () {
                $.get('/api/sprintapi/').done(function (response) {
                    $("#responseText").text(JSON.stringify(response, undefined, 3));
                    $("#response").show();
                });
                return false;
            });

            $("button").on("click", function() {
                $("#failure").hide();
                $("#response").hide();
                return false;
            });

        });
    </script>
}